<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TTS Audio Player</title>
  <style>
    body { font-family: sans-serif; margin: 2em; }
    audio { width: 100%; margin-top: 1em; }
    .track { margin: 0.5em 0; }
  </style>
</head>
<body>
  <h1>ðŸŽ§ Tamil Stories Audio Player</h1>
  <div id="playlist"></div>
  <audio id="player" controls></audio>

  <script>
    const playlistDiv = document.getElementById('playlist');
    const player = document.getElementById('player');

    fetch('assets/playlist.json')
      .then(res => res.json())
      .then(files => {
        let current = 0;
        function playTrack(index) {
          player.src = files[index];
          player.play();
        }

        files.forEach((file, idx) => {
          const title = decodeURIComponent(file.split('/').pop().replace('.mp3', '').replace(/_/g, ' '));
          const div = document.createElement('div');
          div.className = 'track';
          div.textContent = `â–¶ ${title}`;
          div.style.cursor = 'pointer';
          div.onclick = () => {
            current = idx;
            playTrack(current);
          };
          playlistDiv.appendChild(div);
        });

        player.onended = () => {
          current = (current + 1) % files.length;
          playTrack(current);
        };

        // Autoplay first track
        if (files.length) playTrack(0);
      });
  </script>
</body>
</html>
